# 1.1 ë””ìì¸ íŒ¨í„´ 

> **ğŸ’¡ êµ¬ì„±**
> 
> 1ì¥ì—ì„œëŠ” ë””ìì¸ íŒ¨í„´ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì´ë¡ ë¿ë§Œ ì•„ë‹ˆë¼ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë””ìì¸ íŒ¨í„´ì´ ì“°ì´ê³  ìˆëŠ”ì§€ë¥¼ ì„œìˆ í–ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ â€˜ì „ëµ íŒ¨í„´ì€ passport ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì‚¬ìš©ëœë‹¤â€™ì²˜ëŸ¼ ì‹¤ë¬´ì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì•Œë ¤ì¤ë‹ˆë‹¤. ì˜ˆì‹œ ì½”ë“œë¡œëŠ” ìë°”, ìë°”ìŠ¤í¬ë¦½íŠ¸ ë‘ ê°€ì§€ì˜ ì–¸ì–´ë¡œ êµ¬ì„±í–ˆê³ , ì½”ë“œì˜ ë‚œì´ë„ë¥¼ ìµœëŒ€í•œ ë‚®ì¶”ë©´ì„œë„ ë””ìì¸ íŒ¨í„´ì„ ì˜ í‘œí˜„í•˜ë„ë¡ ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.

ìš°ë¦¬ê°€ í”íˆ í”„ë¡œê·¸ë˜ë°í•  ë•Œ ì“°ëŠ” `React.js` , `Vue.js` , `Spring` ë“± ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ í”„ë ˆì„ì›Œí¬ì˜ ê¸°ë³¸ì´ ë˜ëŠ” ë””ìì¸ íŒ¨í„´ê³¼ í¬ê²Œ ë³´ì•˜ì„ ë•Œ ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ ë¡œì§ì„ êµ¬ì„±í•´ì•¼ í•˜ëŠ”ì§€ì—ëŒ€í•œ ì‹œê°ì´ ë‹´ê²¨ ìˆëŠ” í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„ì„ ë°°ì›Œ ë³´ê² ìŠµë‹ˆë‹¤.

> **ğŸ’¡ ìš©ì–´**
> 
> 1. **ë¼ì´ë¸ŒëŸ¬ë¦¬**  
ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” íŠ¹ì •í•œ ê¸°ëŠ¥ë“¤ì„ ëª¨ë“ˆí™”í•œ ê²ƒì„ ì˜ë¯¸í•œë‹¤. í´ë”ëª…, íŒŒì¼ëª… ë“±ì— ëŒ€í•œ ê·œì¹™ì´ ì—†ê³  í”„ë ˆì„ì›Œí¬ì— ë¹„í•´ ììœ ë¡­ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¬´ì–¸ê°€ë¥¼ ìë¥¼ ë•Œ â€˜ë„êµ¬â€™ì¸ **`â€˜ê°€ìœ„â€™`**ë¥¼ ì‚¬ìš©í•´ì„œ â€˜ë‚´ê°€â€™ ì§ì ‘ ì»¨íŠ¸ë¡¤í•˜ì—¬ ìë¥´ëŠ”ë°, ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì´ì™€ ë¹„ìŠ·í•˜ë‹¤.
> 2. **í”„ë ˆì„ì›Œí¬**  
ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” íŠ¹ì •í•œ ê¸°ëŠ¥ë“¤ì„ ëª¨ë“ˆí™”í•œ ê²ƒì„ ì˜ë¯¸í•œë‹¤. í´ë”ëª…, íŒŒì¼ëª… ë“±ì— ëŒ€í•œ ê·œì¹™ì´ ìˆìœ¼ë©° ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë¹„í•´ ì¢€ ë” ì—„ê²©í•˜ë‹¤. ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™í•  ë•Œ â€˜ë„êµ¬â€™ì¸ **`ë¹„í–‰ê¸°`**ë¥¼ íƒ€ê³  ì´ë™í•˜ì§€ë§Œ â€˜ë¹„í–‰ê¸°â€™ê°€ ì»¨íŠ¸ë¡¤í•˜ê³  ë‚˜ëŠ” ê°€ë§Œíˆ ì•‰ì•„ ìˆì–´ì•¼ í•œë‹¤. í”„ë ˆì„ì›Œí¬ëŠ” ì´ì™€ ë¹„ìŠ·í•˜ë‹¤. 

ë””ìì¸ íŒ¨í„´ì´ë€ í”„ë¡œê·¸ë¨ì„ ì„¤ê³„í•  ë•Œ ë°œìƒí–ˆë˜ ë¬¸ì œì ë“¤ì„ ê°ì²´ ê°„ì˜ ìƒí˜¸ ê´€ê³„ ë“±ì„ ì´ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ í•˜ë‚˜ì˜ â€˜ê·œì•½â€™ í˜•íƒœë¡œ ë§Œë“¤ì–´ ë†“ì€ ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œëŠ” ë‹¤ì–‘í•œ ë””ìì¸ íŒ¨í„´ì„ `JavaScript`, `Java` ë¡œ ëœ ì½”ë“œì™€ í•¨ê»˜ ì‚´í´ë´…ë‹ˆë‹¤. ëª¨ë“  ì½”ë“œëŠ” ë³„ë„ì˜ í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•˜ì§€ ì•Šê³  ì›¹ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒ ë§í¬ì—ì„œ ì‰½ê²Œ í…ŒìŠ¤íŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í”Œë ˆì´ì½”ë“œ ë§í¬ : https://playcode.io/new
![ê·¸ë¦¼1-1](../images/ê·¸ë¦¼1-1.png)

ìë°”ëŠ” ë‹¤ìŒ ë§í¬ì—ì„œ ì‰½ê²Œ í…ŒìŠ¤íŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì½”ë”©ê·¸ë¼ìš´ë“œ ë§í¬ : https://www.tutorialspoint.com/compilers/online-java-compiler.htm
![ê·¸ë¦¼1-2](../images/ê·¸ë¦¼1-2.png)


## 1.1.1 ì‹±ê¸€í†¤ íŒ¨í„´
ì‹±ê¸€í†¤ íŒ¨í„´(singleton pattern)ì€ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ì˜¤ì§ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ê°€ì§€ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ ê°œë³„ì ì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì§€ë§Œ, ê·¸ë ‡ê²Œ í•˜ì§€ ì•Šê³  í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¨ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¡œì§ì„ ë§Œë“œëŠ” ë° ì“°ì´ë©°, ë³´í†µ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ëª¨ë“ˆì— ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.

![ê·¸ë¦¼1-3](../images/ê·¸ë¦¼1-3.png)

í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë†“ê³  í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‹¤ë¥¸ ëª¨ë“ˆë“¤ì´ ê³µìœ í•˜ë©° ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ë“œëŠ” ë¹„ìš©ì´ ì¤„ì–´ë“œëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì˜ì¡´ì„±ì´ ë†’ì•„ì§„ë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.

### ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì‹±ê¸€í†¤ íŒ¨í„´

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ë¦¬í„°ëŸ´ {} ë˜ëŠ” new Objectë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´ ë‹¤ë¥¸ ì–´ë–¤ ê°ì²´ì™€ë„ ê°™ì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ ìì²´ë§Œìœ¼ë¡œ ì‹±ê¸€í†¤ íŒ¨í„´ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‹±ê¸€í†¤ íŒ¨í„´ì€ ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
// ì½”ë“œ ìœ„ì¹˜ : ch1/1.js

const obj = {
	a: 27
}

const obj2 = {
	a: 27
}
console.log(obj === obj2)
// fale
```

ì•ì˜ ì½”ë“œì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ `obj`ì™€ `obj2`ëŠ” ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì´ ë˜í•œ new Object ë¼ëŠ” í´ë˜ìŠ¤ì—ì„œ ë‚˜ì˜¨ ë‹¨ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë‹ˆ ì–´ëŠ ì •ë„ ì‹±ê¸€í†¤ íŒ¨í„´ì´ë¼ ë³¼ ìˆ˜ ìˆì§€ë§Œ, ì‹¤ì œ ì‹±ê¸€í†¤ íŒ¨í„´ì€ ë³´í†µ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

```jsx
// ì½”ë“œ ìœ„ì¹˜ : ch1/2.js

class Singleton {
	constructor() {
		if (!Singleton.instance) {
			Singleton.instance = this
		}
		return Singleton.instance
	}
	getInstance() {
		return this
	}
}
const a = new Singleton()
const b = new Singleton()
console.log(a === b)  // true
```

ì•ì˜ ì½”ë“œëŠ” `Singleton.instance` ë¼ëŠ” í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§€ëŠ” Singleton í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•œ ëª¨ìŠµì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ aì™€ bëŠ” í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§‘ë‹ˆë‹¤. 

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ëª¨ë“ˆ

ì•ì„œ ì„¤ëª…í•œ ì‹±ê¸€í†¤ íŒ¨í„´ì€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ëª¨ë“ˆì— ë§ì´ ì“°ì…ë‹ˆë‹¤.

```jsx
// ì½”ë“œìœ„ì¹˜ : ch1/3.js

const URL = 'mongodb://localhost:27017/kundolapp'
const createConnection = url => ({"url" : url})
class DB {
	constructor(url) {
		if (!DB.instance) {
			DB.instance = createConnection(url)
		}
		return DB.instance
	}
	connect() {
		return this.instance
	}
}
const a = new DB(URL)
const b = new DB(URL)
console.log(a === b)  // true
```

ì´ë ‡ê²Œ `DB.instance` ë¼ëŠ” í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ a, bë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— ê´€í•œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¹„ìš©ì„ ì•„ë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

### ìë°”ì—ì„œì˜ ì‹±ê¸€í†¤ íŒ¨í„´

ìë°”ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì¤‘ì²© í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ì„œ ë§Œë“œëŠ” ë°©ë²•ì´ ê°€ì¥ ëŒ€ì¤‘ì ì…ë‹ˆë‹¤. ë” ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´ í•„ìì˜ ìœ íŠœë¸Œ ì±„ë„ì¸ â€˜í°ëŒì˜ í„°ì „ - JAVAë¡œ ì‹±ê¸€í†¤ íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” 7ê°€ì§€ ë°©ë²•â€™ ì˜ìƒì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.

```java
// ì½”ë“œ ìœ„ì¹˜ : ch1/4.java

class Singleton {
	private static class singleInstanceHolder {
		private static final Singleton INSTANCE = new Singleton();
	}
	public static Singleton getInstance() {
		return singleInstanceHolder.INSTANCE;
	}
}

public class HelloWorld {
	public static void main(String[] arge) {
		Singleton a = Singleton.getInstance();
		Singleton b = Singleton.getInstance();
		System.out.printIn(a.hashCode());
		System.out.printIn(b.hashCode());
		if (a == b) {
			System.out.printIn(true);
		}
	}
}
/*
705927765
705927765
*/
```

### mongooseì˜ ì‹±ê¸€í†¤ íŒ¨í„´
![ê·¸ë¦¼1-4](../images/ê·¸ë¦¼1-4.png)

ì‹¤ì œë¡œ ì‹±ê¸€í†¤ íŒ¨í„´ì€ Node.jsì—ì„œ MongoDB ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•  ë•Œ ì“°ëŠ” mongoose ëª¨ë“ˆì—ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

moggooseì˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•  ë•Œ ì“°ëŠ” `connect()` ë¼ëŠ” í•¨ìˆ˜ëŠ” ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë‹¤ìŒì€ `connect()` í•¨ìˆ˜ë¥¼ êµ¬í˜„í•  ë•Œ ì“°ì¸ ì‹¤ì œ ì½”ë“œì…ë‹ˆë‹¤. 

```jsx
Monggoose.proottype.connect = function(uri, options, callback) {
	const_monggoose = this instanceof Monggoose ? this : monggoose;
	const conn = _mongoose.connection;
	
	return _mongoose._promiseOrCallback(callback, cb => {
		conn.openUri(uri, options, err => {
			if (err != null) {
				return cb(err);
			}
			return cb(null, _mongoose);
		});
	});
};
```

### MySQLì˜ ì‹±ê¸€í†¤ íŒ¨í„´
![ê·¸ë¦¼1-5](../images/ê·¸ë¦¼1-5.png)

Node.jsì—ì„œ MySQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•  ë•Œë„ ì‹±ê¸€í†¤ íŒ¨í„´ì´ ì“°ì…ë‹ˆë‹¤. 

```jsx
// ë©”ì¸ ëª¨ë“ˆ
const mysql = require('mysql');
const pool = mysql.createPool({
	connectionLimit: 10,
	host: 'example.org',
	user: 'kundol',
	password: 'secret',
	database: 'ìŠ¹ì² ì´ë””ë¹„'
});
pool.connect();

// ëª¨ë“ˆ A
pool.query(query, function (error, results, fields) {
	if (error) throw error;
	console.log('The solution is: ', results[0].solution);
});

// ëª¨ë“ˆ B
pool.query(query, function (error, results, fields) {
	if (error) throw error;
	console.log('The solution is: ', results[0].solution);
});
```

ì•ì˜ ì½”ë“œì²˜ëŸ¼ ë©”ì¸ ëª¨ë“ˆì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— ê´€í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ë‹¤ë¥´ëª¨ë“ˆì¸ A ë˜ëŠ” Bì—ì„œ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë³´ë‚´ëŠ” í˜•ì‹ìœ¼ë¡œ ì“°ì…ë‹ˆë‹¤.

### ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ë‹¨ì 

ì‹±ê¸€í†¤ íŒ¨í„´ì€ TDD(Test Driven Development)ë¥¼ í•  ë•Œ ê±¸ë¦¼ëŒì´ ë©ë‹ˆë‹¤. TDDë¥¼ í•  ë•Œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì£¼ë¡œ í•˜ëŠ”ë°, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” í…ŒìŠ¤íŠ¸ê°€ ì„œë¡œ ë…ë¦½ì ì´ì–´ì•¼ í•˜ë©° í…ŒìŠ¤íŠ¸ë¥¼ ì–´ë–¤ ìˆœì„œë¡œë“  ì‹¤í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ì‹±ê¸€í†¤ íŒ¨í„´ì€ ë¯¸ë¦¬ ìƒì„±ëœ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” íŒ¨í„´ì´ë¯€ë¡œ ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ â€˜ë…ë¦½ì ì¸â€™ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸°ê°€ ì–´ë µìŠµë‹ˆë‹¤.

### ì˜ì¡´ì„± ì£¼ì…

ë˜í•œ, ì‹±ê¸€í†¤ íŒ¨í„´ì€ ì‚¬ìš©í•˜ê¸°ê°€ ì‰½ê³  êµ‰ì¥íˆ ì‹¤ìš©ì ì´ì§€ë§Œ ëª¨ë“ˆ ê°„ì˜ ê²°í•©ì„ ê°•í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ ì˜ì¡´ì„± ì£¼ì…(DI, Dependency Injection)ì„ í†µí•´ ëª¨ë“ˆ ê°„ì˜ ê²°í•©ì„ ì¡°ê¸ˆ ë” ëŠìŠ¨í•˜ê²Œ ë§Œë“¤ì–´ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì°¸ê³ ë¡œ ì˜ì¡´ì„±ì´ë€ ì¢…ì†ì„±ì´ë¼ê³ ë„ í•˜ë©° Aê°€ Bì— ì˜ì¡´ì„±ì´ ìˆë‹¤ëŠ” ê²ƒì€ Bì˜ ë³€ê²½ì‚¬í•­ì— ëŒ€í•´ A ë˜í•œ ë³€í•´ì•¼ ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 

![ê·¸ë¦¼1-6](../images/ê·¸ë¦¼1-6.png)

ì•ì˜ ê·¸ë¦¼ì²˜ëŸ¼ ë©”ì¸ ëª¨ë“ˆ(main mudule)ì´ â€˜ì§ì ‘â€™ ë‹¤ë¥¸ í•˜ìœ„ ëª¨ë“ˆì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì£¼ê¸°ë³´ë‹¤ëŠ” ì¤‘ê°„ì— ì˜ì¡´ì„± ì£¼ì…ì(dependency injector)ê°€ ì´ ë¶€ë¶„ì„ ê°€ë¡œì±„ ë©”ì¸ ëª¨ë“ˆì´ â€˜ê°„ì ‘â€™ì ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì´ë¥¼ í†µí•´ ë©”ì¸ ëª¨ë“ˆ(ìƒìœ„ ëª¨ë“ˆ)ì€ í•˜ìœ„ ëª¨ë“ˆì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ë–¨ì–´ì§€ê²Œ ë©ë‹ˆë‹¤. ì°¸ê³ ë¡œ ì´ë¥¼ â€˜ë””ì»¤í”Œë§ì´ ëœë‹¤â€™ê³ ë„ í•©ë‹ˆë‹¤.

> **ğŸ’¡ ì˜ì¡´ì„± ì£¼ì…ì˜ ì¥ì **
> 
> ëª¨ë“ˆë“¤ì„ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ê°€ ë˜ì–´ í…ŒìŠ¤íŒ…í•˜ê¸° ì‰½ê³  ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê¸°ë„ ìˆ˜ì›”í•©ë‹ˆë‹¤. ë˜í•œ, êµ¬í˜„í•  ë•Œ ì¶”ìƒí™” ë ˆì´ì–´ë¥¼ ë„£ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ì²´ë¥¼ ë„£ì–´ ì£¼ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜ì¡´ì„± ë°©í–¥ì´ ì¼ê´€ë˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê²Œ ì¶”ë¡ í•  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë“ˆ ê°„ì˜ ê´€ê³„ë“¤ì´ ì¡°ê¸ˆ ë” ëª…í™•í•´ì§‘ë‹ˆë‹¤.

> **ğŸ’¡ ì˜ì¡´ì„± ì£¼ì…ì˜ ë‹¨ì **
> 
> ëª¨ë“ˆë“¤ì´ ë”ìš±ë” ë¶„ë¦¬ë˜ë¯€ë¡œ í´ë˜ìŠ¤ ìˆ˜ê°€ ëŠ˜ì–´ë‚˜ ë³µì¡ì„±ì´ ì¦ê°€ë  ìˆ˜ ìˆìœ¼ë©° ì•½ê°„ì˜ ëŸ°íƒ€ì„ íŒ¨ë„í‹°ê°€ ìƒê¸°ê¸°ë„ í•©ë‹ˆë‹¤.

> **ğŸ’¡ ì˜ì¡´ì„± ì£¼ì… ì›ì¹™**  
>
> ì˜ì¡´ì„± ì£¼ì…ì€ â€œìƒìœ„ ëª¨ë“ˆì€ í•˜ìœ„ ëª¨ë“ˆì—ì„œ ì–´ë– í•œ ê²ƒë„ ê°€ì ¸ì˜¤ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ, ë‘˜ ë‹¤ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•˜ë©°, ì´ë•Œ ì¶”ìƒí™”ëŠ” ì„¸ë¶€ ì‚¬í•­ì— ì˜ì¡´í•˜ì§€ ë§ì•„ì•¼ í•©ë‹ˆë‹¤.â€ë¼ëŠ” ì˜ì¡´ì„± ì£¼ì… ì›ì¹™ì„ ì§€ì¼œì£¼ë©´ì„œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.

## 1.1.2 íŒ©í† ë¦¬ íŒ¨í„´ 
**íŒ©í† ë¦¬ íŒ¨í„´(factory pattern)** ì€ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œì—ì„œ ê°ì²´ ìƒì„± ë¶€ë¶„ì„ ë–¼ì–´ë‚´ ì¶”ìƒí™”í•œ íŒ¨í„´ì´ì ìƒì† ê´€ê³„ì— ìˆëŠ” ë‘ í´ë˜ìŠ¤ì—ì„œ ìƒìœ„ í´ë˜ìŠ¤ê°€ ì¤‘ìš”í•œ ë¼ˆëŒ€ë¥¼ ê²°ì •í•˜ê³ , í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ê°ì²´ ìƒì„±ì— ê´€í•œ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ê²°ì •í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.  
ìƒìœ„ í´ë˜ìŠ¤ì™€ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ë¶„ë¦¬ë˜ê¸° ë•Œë¬¸ì— ëŠìŠ¨í•œ ê²°í•©ì„ ê°€ì§€ë©° ìƒìœ„ í´ë˜ìŠ¤ì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë°©ì‹ì— ëŒ€í•´ ì „í˜€ ì•Œ í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— ë” ë§ì€ ìœ ì—°ì„±ì„ ê°–ê²Œ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê°ì²´ ìƒì„± ë¡œì§ì´ ë”°ë¡œ ë–¼ì–´ì ¸ ìˆê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ë¦¬íŒ©í„°ë§í•˜ë”ë¼ë„ í•œ ê³³ë§Œ ê³ ì¹  ìˆ˜ ìˆê²Œ ë˜ë‹ˆ ìœ ì§€ ë³´ìˆ˜ì„±ì´ ì¦ê°€ë©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ë¼ë–¼ ë ˆì‹œí”¼ì™€ ì•„ë©”ë¦¬ì¹´ë…¸ ë ˆì‹œí”¼, ìš°ìœ  ë ˆì‹œí”¼ë¼ëŠ” êµ¬ì²´ì ì¸ ë‚´ìš©ì´ ë“¤ì–´ ìˆëŠ” í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì»¨ë² ì´ì–´ ë²¨íŠ¸ë¥¼ í†µí•´ ì „ë‹¬ë˜ê³ , ìƒìœ„ í´ë˜ìŠ¤ì¸ ë°”ë¦¬ìŠ¤íƒ€ ê³µì¥ì—ì„œ ì´ ë ˆì‹œí”¼ë“¤ì„ í† ëŒ€ë¡œ ìš°ìœ  ë“±ì„ ìƒì‚°í•˜ëŠ” ìƒì‚° ê³µì •ì„ ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. 

![ê·¸ë¦¼1-7](../images/ê·¸ë¦¼1-7.png)

### ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ íŒ©í† ë¦¬ íŒ¨í„´
ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ íŒ©í† ë¦¬ íŒ¨í„´ì„ êµ¬í˜„í•œë‹¤ë©´ ê°„ë‹¨í•˜ê²Œ new Object()ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```jsx
const num = new Object(42)
const str = new Object('abc')
num.constructor.name;  // Number
str.constructor.name;  // String
```

ìˆ«ìë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ ë¬¸ìì—´ì„ ì „ë‹¬í•¨ì— ë”°ë¼ ë‹¤ë¥¸ íƒ€ì…ì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, ì „ë‹¬ë°›ì€ ê°’ì— ë”°ë¼ ë‹¤ë¥¸ ê°ì²´ë¥¼ ìƒì„±í•˜ë©° ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì… ë“±ì„ ì •í•©ë‹ˆë‹¤.
ì»¤í”¼ íŒ©í† ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¼ë–¼ ë“±ì„ ìƒì‚°í•˜ëŠ” ì½”ë“œë¥¼ êµ¬ì¶•í•´ë³´ê² ìŠµë‹ˆë‹¤.
```jsx
class CoffeeFacotry {
	static createCoffee(type) {
		const factory = factoryList[type]
		return factory.createCoffee()
	}
}

class Latte {
	constructor() {
		this.name = "latte"
	}
}
class Espresso{
	constructor() {
		this.name = "Espresso"
	}
}
class LatteFactory extends CoffeeFactory {
	static createCoffee() {
		return new Latte()
	}
}
class EspressoFactory extends CoffeeFactory {
	static createCoffee() {
		return new Espresso()
	}
}
const factoryList = { LatteFacotry, EspressoFacotry }

const main = () => {
	// ë¼ë–¼ ì»¤í”¼ë¥¼ ì£¼ë¬¸í•œë‹¤.
	const coffee = CoffeFactory.createCoffee("LatteFactory")
	// ì»¤í”¼ ì´ë¦„ì„ ë¶€ë¥¸ë‹¤
	console.log(coffee.name)  // latte
}
main()
```

CoffeeFactoryë¼ëŠ” ìƒìœ„ í´ë˜ìŠ¤ê°€ ì¤‘ìš”í•œ ë¼ˆëŒ€ë¥¼ ê²°ì •í•˜ê³  í•˜ìœ„ í´ë˜ìŠ¤ì¸ LatteFactoryê°€ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ê²°ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤. 
ì°¸ê³ ë¡œ ì´ëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ë¼ê³ ë„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. CoffeeFactoryì—ì„œ LatteFactoryì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ LatteFactoryì—ì„œ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ CoffeeFactoryì— ì£¼ì…í•˜ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ë˜í•œ, CoffeeFactory í´ë˜ìŠ¤ë¥¼ ë³´ë©´ static í‚¤ì›Œë“œë¥¼ í†µí•´ createCoffee() ë©”ì„œë“œë¥¼ ì •ì  ë©”ì„œë“œë¡œ ì„ ì–¸í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë°, ì´ë ‡ê²Œ ì •ì  ë©”ì„œë“œë¡œ ì •ì˜í•˜ë©´ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°ì²´ë¥¼ ë§Œë“¤ì§€ ì•Šê³  í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë©°, í•´ë‹¹ ë©”ì„œë“œì— ëŒ€í•œ ë©”ëª¨ë¦¬ í• ë‹¹ì„ í•œ ë²ˆë§Œ í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.

### ìë°”ì˜ íŒ©í† ë¦¬ íŒ¨í„´
ì´ë¥¼ ìë°”ë¡œ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```java
enum CoffeeType {
	LATTE,
	ESPRESSO
}

abstract class Coffee {
	protected String name;
	
	public String getName() {
		return name;
	}
}

class Latte extends Coffee {
	public Latte() {
		name = "latte";
	}
}
class Expresso extends Coffee {
	public Expresso() {
		name = "Expresso";
	}
}

class CoffeeFactory {
	public static Coffee createCoffee(CoffeeType type) {
		switch (type) {
			case LATTE:
				return new Latte();
			case EXPRESSO:
				return new Espresso();
			default:
				throw new IllegalArgumentException("Invalid coffee type: " + type);
		}
	}
}

public class Main {
	public static void main(String[] args) {
		Coffee coffee = CoffeeFactory.createCoffee(CoffeeType.LATTE);
		System.out.printIn(coffee.getName());  // latte
	}
}
```

ì•ì˜ ì½”ë“œëŠ” CoffeeFactory ë°‘ì— Coffee í´ë˜ìŠ¤ë¥¼ ë†“ê³  í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” Latte, Espresso í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•œ ëª¨ìŠµì…ë‹ˆë‹¤. 

> **ğŸ’¡ ìš©ì–´**
> 
> 1. **Enum**  
ìƒìˆ˜ì˜ ì§‘í•©ì„ ì •ì˜í•  ë•Œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì›”, ì¼, ìƒ‰ìƒ ë“±ì˜ ìƒìˆ˜ ê°’ì„ ë‹´ëŠ”ë‹¤. ìë°”ì—ì„œëŠ” Enumì´ ë‹¤ë¥¸ ì–¸ì–´ë³´ë‹¤ ë” í™œë°œíˆ í™œìš©ë˜ë©°, ìƒìˆ˜ë¿ë§Œ ì•„ë‹ˆë¼ ë©”ì„œë“œë¥¼ ì§‘ì–´ë„£ì–´ ê´€ë¦¬í•  ìˆ˜ë„ ìˆë‹¤. Enumì„ ê¸°ë°˜ìœ¼ë¡œ ìƒìˆ˜ ì§‘í•©ì„ ê´€ë¦¬í•œë‹¤ë©´ ì½”ë“œë¥¼ ë¦¬íŒ¨í„°ë§í•  ë•Œ ìƒìˆ˜ ì§‘í•©ì— ëŒ€í•œ ë¡œì§ ìˆ˜ì • ì‹œ ì´ ë¶€ë¶„ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤ëŠ” ì¥ì ì´ ìˆê³ , ë³¸ì§ˆì ìœ¼ë¡œ ìŠ¤ë ˆë“œì„¸ì´í”„(thread safe)í•˜ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ íŒ¨í„´ì„ ë§Œë“¤ ë•Œ ë„ì›€ì´ ëœë‹¤. ì°¸ê³ ë¡œ Enumìœ¼ë¡œ ë§Œë“œëŠ” ì‹±ê¸€í†¤ íŒ¨í„´ì€ í•„ìì˜ ìœ íŠœë¸Œ ì±„ë„, â€˜í°ëŒì˜ í„°ì „ - JAVAë¡œ ì‹±ê¸€í†¤ íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” 7ê°€ì§€ ë°©ë²•â€™ ì˜ìƒì„ ì°¸ê³ í•˜ì„¸ìš”.

## 1.1.3 ì „ëµ íŒ¨í„´
ì „ëµ íŒ¨í„´(strategy)ì€ ì •ì±… íŒ¨í„´(policy)ì´ë¼ê³ ë„ í•˜ë©°, ê°ì²´ì˜ í–‰ìœ„ë¥¼ ë°”ê¾¸ê³  ì‹¶ì€ ê²½ìš° â€˜ì§ì ‘â€™ ìˆ˜ì •í•˜ì§€ ì•Šê³  ì „ëµì´ë¼ê³  ë¶€ë¥´ëŠ” â€˜ìº¡ìŠí™”í•œ ì•Œê³ ë¦¬ì¦˜â€™ì„ ì»¨í…ìŠ¤íŠ¸ ì•ˆì—ì„œ ë°”ê¿”ì£¼ë©´ì„œ ìƒí˜¸ êµì²´ê°€ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. 

![ê·¸ë¦¼1-8](../images/ê·¸ë¦¼1-8.png)

ì•„ë˜ëŠ” ì–´ë–¤ ê²ƒì„ ì‚´ ë•Œ ë„¤ì´ë²„í˜ì´, ì¹´ì¹´ì˜¤í˜ì´ ë“± ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ê²°ì œí•˜ë“¯ì´ ì–´ë–¤ ì•„ì´í…œì„ ì‚´ ë•Œ LUNACardë¡œ ì‚¬ëŠ” ê²ƒê³¼ KAKAOCardë¡œ ì‚¬ëŠ” ê²ƒì„ êµ¬í˜„í•œ ì˜ˆì œì…ë‹ˆë‹¤. ê²°ì œ ë°©ì‹ì˜ â€˜ì „ëµâ€™ë§Œ ë°”ê¿”ì„œ ë‘ ê°€ì§€ ë°©ì‹ì„ ê²°ì œí•˜ëŠ” ê²ƒì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. 

> ìë°”ì˜ ì „ëµ íŒ¨í„´
> 

```java
import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.List;
interface PaymentStrategy {
    public void pay(int amount);
}

class KAKAOCardStrategy implements PaymentStrategy {
    private String name;
    private String cardNumber;
    private String cvv;
    private String dateOfExpiry;
    
    public KAKAOCardStrategy(String nm, String ccNum, String cvv, String expiryDate) {
        this.name = nm;
        this.cardNumber = ccNum;
        this.cvv = cvv;
        this.dateOfExpiry = expiryDate;
    }
    
    @Override
    public void pay(int amount) {
        System.out.printIn(amount + " paid using KAKAOCard.");
    }
}

class LUNACardStrategy implements PaymentStrategy {
    private String emailId;
    private String password;
    
    public LUNACardStrategy(String email, String pwd) {
        this.emailId = email;
        this.password = pwd;
    }
    
    @Override
    public void pay(int amount) {
        System.out.printIn(amount + " paid using LUNACard.");
    }
}

class Item {
    private String name;
    private int price;
    public Item(String name, int cost) {
        this.name = name;
        this.price = cost;
    }
    
    public String getName() {
        return name;
    }
    
    public int getPrice() {
        return price;
    }
}

class ShoppingCart {
    List<Item> items;
    
    public ShoppingCart() {
        this.items = new ArrayList<Item>();
    }
    
    public void addItem(Item item) {
        this.items.add(item);
    }
    
    public void removeItem(Item item) {
        this.items.remove(item);
    }
    
    public int calculateTotal() {
        int sum = 0;
        for (Item item : items) {
            sum += item.getPrice();
        }
        return sum;
    }
    
    public void pay(PaymentStrategy paymentMethod) {
        int amount = calculateTotal();
        paymentMethod.pay(amount);
    }
}

public class HelloWorld {
    public static void main(String[] args) {
        ShoppingCart cart = new ShoppingCart();
        
        Item A = new Item("kundolA", 100);
        Item B = new Item("kundolB", 300);
        
        cart.addItem(A);
        cart.addItem(B);
        
        // pay by LUNACard
        cart.pay(new LUNACardStrategy("kundol@example.com", "pukubababo"));
        
        // pay by KAKAOCard
        cart.pay(new KAKAOCardSTrategy("Ju hongchul", "123456789", "123", "12/01"));
    }
}

/*
400 paid using LUNACard.
400 paid using KAKAOCard.
*/
```

ìœ„ì˜ ì½”ë“œëŠ” ì‡¼í•‘ ì¹´íŠ¸ì— ì•„ì´í…œì„ ë‹´ì•„ `LUNACard` ë˜ëŠ” `KAKAOCard`ë¼ëŠ” ë‘ ê°œì˜ ì „ëµìœ¼ë¡œ ê²°ì œí•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.

> ìš©ì–´
> 

<aside>

< ì»¨í…ìŠ¤íŠ¸ >

í”„ë¡œê·¸ë˜ë°ì—ì„œì˜ ì»¨í…ìŠ¤íŠ¸ëŠ” ìƒí™©, ë§¥ë½, ë¬¸ë§¥ì„ ì˜ë¯¸í•˜ë©° ê°œë°œìê°€ ì–´ë– í•œ ì‘ì—…ì„ ì™„ë£Œí•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ê´€ë ¨ ì •ë³´ë¥¼ ë§í•œë‹¤.

</aside>

> passportì˜ ì „ëµ íŒ¨í„´
>
ì „ëµ íŒ¨í„´ì„ í™œìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œëŠ” `passport`ê°€ ìˆìŠµë‹ˆë‹¤.  

![ê·¸ë¦¼1-9](../images/ê·¸ë¦¼1-9.png)

`passport`ëŠ” Node.jsì—ì„œ ì¸ì¦ ëª¨ë“ˆì„ êµ¬í˜„í•  ë•Œ ì“°ëŠ” ë¯¸ë“¤ì›¨ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ì—¬ëŸ¬ ê°€ì§€ â€˜ì „ëµâ€™ì„ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë‚´ì˜ íšŒì›ê°€ì…ëœ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦í•˜ëŠ” LocalStrategy ì „ëµê³¼ í˜ì´ìŠ¤ë¶, ë„¤ì´ë²„ ë“± ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦í•˜ëŠ” OAuth ì „ëµ ë“±ì„ ì§€ì›í•©ë‹ˆë‹¤. 

ë‹¤ìŒ ì½”ë“œì²˜ëŸ¼ â€˜ì „ëµâ€™ë§Œ ë°”ê¿”ì„œ ì¸ì¦í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

```jsx
var passport = require('passport')
    , LocalStrategy = require('passport-local').Strategy;

passport.use(new LocalStrategy(
    function(username, password, done) {
        User.findOne({ username: username }, function (err, user) {
            if (err) { return done(err); }
                if (!user) {
                    return done(null, false, { message: 'Incorrect username.'
});
                }
                if (!user.validPassword(password)) {
                    return done(null, false, { message: 'Incorrect password.'
});
                }
                return done(null, user);
            });
        }
    ));
```

passport.use(new LocalStrategy( â€¦ì²˜ëŸ¼ passport.use()ë¼ëŠ” ë©”ì„œë“œì— â€˜ì „ëµâ€™ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì–´ì„œ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 1.1.4 ì˜µì €ë²„ íŒ¨í„´

ì˜µì €ë²„ íŒ¨í„´(observer pattern)ì€ ì£¼ì²´ê°€ ì–´ë–¤ ê°ì²´(subject)ì˜ ìƒíƒœ ë³€í™”ë¥¼ ê´€ì°°í•˜ë‹¤ê°€ ìƒíƒœ ë³€í™”ê°€ ìˆì„ ë•Œë§ˆë‹¤ ë©”ì„œë“œ ë“±ì„ í†µí•´ ì˜µì €ë²„ ëª©ë¡ì— ìˆëŠ” ì˜µì €ë²„ë“¤ì—ê²Œ ë³€í™”ë¥¼ ì•Œë ¤ì£¼ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤. 

![ê·¸ë¦¼1-10](../images/ê·¸ë¦¼1-10.png)

ì—¬ê¸°ì„œ ì£¼ì²´ë€ ê°ì²´ì˜ ìƒíƒœ ë³€í™”ë¥¼ ë³´ê³  ìˆëŠ” ê´€ì°°ìì´ë©°, ì˜µì €ë²„ë“¤ì´ë€ ì´ ê°ì²´ì˜ ìƒíƒœ ë³€í™”ì— ë”°ë¼ ì „ë‹¬ë˜ëŠ” ë©”ì„œë“œ ë“±ì„ ê¸°ë°˜ìœ¼ë¡œ â€˜ì¶”ê°€ ë³€í™” ì‚¬í•­â€™ì´ ìƒê¸°ëŠ” ê°ì²´ë“¤ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 

![ê·¸ë¦¼1-11](../images/ê·¸ë¦¼1-11.png)

ë˜í•œ, ì•ì˜ ê·¸ë¦¼ì²˜ëŸ¼ ì£¼ì²´ì™€ ê°ì²´ë¥¼ ë”°ë¡œ ë‘ì§€ ì•Šê³  ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•í•˜ê¸°ë„ í•©ë‹ˆë‹¤. 

ì˜µì €ë²„ íŒ¨í„´ì„ í™œìš©í•œ ì„œë¹„ìŠ¤ë¡œëŠ” íŠ¸ìœ„í„°ê°€ ìˆìŠµë‹ˆë‹¤. 

![ê·¸ë¦¼1-12](../images/ê·¸ë¦¼1-12.png)
ì•ì˜ ê·¸ë¦¼ì²˜ëŸ¼ ë‚´ê°€ ì–´ë–¤ ì‚¬ëŒì¸ ì£¼ì²´ë¥¼ `â€˜íŒ”ë¡œìš°â€™` í–ˆë‹¤ë©´ ì£¼ì²´ê°€ í¬ìŠ¤íŒ…ì„ ì˜¬ë¦¬ê²Œ ë˜ë©´ ì•Œë¦¼ì´ `â€˜íŒ”ë¡œì›Œâ€™`ì—ê²Œ ê°€ì•¼ í•©ë‹ˆë‹¤.

![ê·¸ë¦¼1-13](../images/ê·¸ë¦¼1-13.png)
ë˜í•œ, ì˜µì €ë²„ íŒ¨í„´ì€ ì£¼ë¡œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œì— ì‚¬ìš©í•˜ë©° MVC(Model-View-Controller) íŒ¨í„´ì—ë„ ì‚¬ìš©ë©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì£¼ì²´ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ” ëª¨ë¸(model)ì—ì„œ ë³€ê²½ ì‚¬í•­ì´ ìƒê²¨ update() ë©”ì„œë“œë¡œ ì˜µì €ë²„ì¸ ë·°ì— ì•Œë ¤ì£¼ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬(controller) ë“±ì´ ì‘ë™í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

> ìë°”ì—ì„œì˜ ì˜µì €ë²„ íŒ¨í„´
> 

```java
import java.util.ArrayList;
import java.util.List;

interface Subject {
    public void register(Observer obj);
    public void unregister(Observer obj);
    public void notifyObservers();
    public Object getUpdate(Observer obj);
}

interface Observer {
    public void update();
}

class Topic implements Subject {
    private List<Observer> observers;
    private String message;
    
    public Topic() {
        this.observers = new ArrayList<>();
        this.message = "";
    }
    
    @Override
    public void register(Observer obj) {
        if (!observers.contains(obj)) observers.add(obj);
    }
    
    @Override
    public void unregister(Observer obj) {
        observers.remove(obj);
    }
    
    @Override
    public void notifyObservers() {
        this.observers.forEach(Observer::update);
    }
    
    @Override
    public Object getUpdate(Observer obj) {
        return this.message;
    }
    
    public void postMessage(String msg) {
        System.out.printIn("Message sended to Topic: " + msg);
        this.message = msg;
        notifyObservers();
    }
}

class TopicSubscriber implements Observer {
    private String name;
    private Subject topic;
    
    public TopicSubscriber(String name, Subject topic) {
        this.name = name;
        this.topic = topic;
    }
    
    @Override
    public void update() {
        String msg = (String) topic.getUpdate(this);
        System.out.printIn(name + ":: got message >> " + msg);
    }
}

public class HelloWorld {
    public static void main(String[] args) {
        Topic topic = new Topic();
        Observer a = new TopicSubscriber("a", topic);
        Observer b = new TopicSubscriber("b", topic);
        Observer c = new TopicSubscriber("c", topic);
        topic.register(a);
        topic.register(b);
        topic.register(c);
        
        topic.postMessage("amumu is op champion!!");
    }
}
/*
Message sended to Topic: amumu is op champion!!
a:: got message >> amumu is op champion!!
b:: got message >> amumu is op champion!!
c:: got message >> amumu is op champion!!
*/
```

topicì„ ê¸°ë°˜ìœ¼ë¡œ ì˜µì €ë²„ íŒ¨í„´ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ topicì€ ì£¼ì²´ì´ì ê°ì²´ê°€ ë©ë‹ˆë‹¤.  `class Topic implements Subject`ë¥¼ í†µí•´  `Subject interface`ë¥¼ êµ¬í˜„í–ˆê³  `Observer a = new TopicSubscriber(â€aâ€, topic);`ìœ¼ë¡œ ì˜µì €ë²„ë¥¼ ì„ ì–¸í•  ë•Œ í•´ë‹¹ ì´ë¦„ê³¼ ì–´ë– í•œ í† í”½ì˜ ì˜µì €ë²„ê°€ ë  ê²ƒì¸ì§€ë¥¼ ì •í–ˆìŠµë‹ˆë‹¤.

> ìë°”: ìƒì†ê³¼ êµ¬í˜„
> 

ì ì‹œ ì•ì˜ ì½”ë“œì— ë‚˜ì˜¨ implements ë“± ìë°”ì˜ ìƒì†ê³¼ êµ¬í˜„ì˜ íŠ¹ì§•ê³¼ ì°¨ì´ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

- ìƒì†
    - ìƒì†(extends)ì€ ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ë“±ì„ ìƒì†ë°›ì•„ ì‚¬ìš©í•˜ë©° ìì‹ í´ë˜ìŠ¤ì—ì„œ ì¶”ê°€ ë° í™•ì¥ì„ í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì¬ì‚¬ìš©ì„±, ì¤‘ë³µì„±ì˜ ìµœì†Œí™”ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
- êµ¬í˜„
    - êµ¬í˜„(implements)ì€ ë¶€ëª¨ ì¸í„°í˜ì´ìŠ¤(interface)ë¥¼ ìì‹ í´ë˜ìŠ¤ì—ì„œ ì¬ì •ì˜í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë§í•˜ë©°, ìƒì†ê³¼ëŠ” ë‹¬ë¦¬ ë°˜ë“œì‹œ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ì—¬ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.
- ìƒì†ê³¼ êµ¬í˜„ì˜ ì°¨ì´
    - ìƒì†ì€ ì¼ë°˜ í´ë˜ìŠ¤, abstract í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•˜ë©°, êµ¬í˜„ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.

> ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œì˜ ì˜µì €ë²„ íŒ¨í„´
> 

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œì˜ ì˜µì €ë²„ íŒ¨í„´ì€ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ êµ¬í˜„í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

- í”„ë¡ì‹œ ê°ì²´
    - í”„ë¡ì‹œ(proxy) ê°ì²´ëŠ” ì–´ë– í•œ ëŒ€ìƒì˜ ê¸°ë³¸ì ì¸ ë™ì‘(ì†ì„± ì ‘ê·¼, í• ë‹¹, ìˆœíšŒ, ì—´ê±°, í•¨ìˆ˜ í˜¸ì¶œ ë“±)ì˜ ì‘ì—…ì„ ê°€ë¡œì±Œ ìˆ˜ ìˆëŠ” ê°ì²´ë¥¼ ëœ»í•˜ë©°, ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í”„ë¡ì‹œ ê°ì²´ëŠ” ë‘ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
    - `target` : í”„ë¡ì‹œí•  ëŒ€ìƒ
    - `handler` : target ë™ì‘ì„ ê°€ë¡œì±„ê³  ì–´ë– í•œ ë™ì‘ì„ í•  ê²ƒì¸ì§€ê°€ ì„¤ì •ë˜ì–´ ìˆëŠ” í•¨ìˆ˜

ë‹¤ìŒì€ í”„ë¡ì‹œ ê°ì²´ë¥¼ êµ¬í˜„í•œ ì½”ë“œì…ë‹ˆë‹¤.

```jsx
const handler = {
    get: function(target, name) {
        return name === 'name' ? `${target.a} ${target.b}` : target[name]
    }
}

const p = new Proxy({a: 'KUNDOL'}, b: 'IS AUMUMU ZANGIN', handler)
console.log(p.name)  // KUNDOL IS ANUMUMU ZANGIN
```

`new Proxy()`ë¡œ aì™€ b ì†ì„±ì„ ê°€ì§€ê³  ìˆëŠ” ê°ì²´ì™€ handler í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ê³  pë¼ëŠ” ë³€ìˆ˜ë¥¼ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤. ì´í›„ pì˜ name ì†ì„±ì„ ì°¸ì¡°í•˜ë‹ˆ aì™€ bë¼ëŠ” ì†ì„±ë°–ì— ì—†ëŠ” ê°ì²´ê°€ handlerì˜ â€œnameâ€ì´ë¼ëŠ” ì†ì„±ì— ì ‘ê·¼í•  ë•Œ aì™€ bë¥¼ í•©ì³ì„œ ë¬¸ìì—´ì„ ë§Œë“¤ë¼â€ ëŠ” ë¡œì§ì— ë”°ë¼ ì–´ë–¤ ë¬¸ìì—´ì„ ë§Œë“­ë‹ˆë‹¤. ì´ë ‡ê²Œ name ì†ì„± ë“± íŠ¹ì • ì†ì„±ì— ì ‘ê·¼í•  ë•Œ ê·¸ ë¶€ë¶„ì„ ê°€ë¡œì±„ì„œ ì–´ë– í•œ ë¡œì§ì„ ê°•ì œí•  ìˆ˜ ìˆëŠ” ê²ƒì´ **í”„ë¡ì‹œ ê°ì²´**ì…ë‹ˆë‹¤.  


> í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ìš©í•œ ì˜µì €ë²„ íŒ¨í„´
> 

ê·¸ë ‡ë‹¤ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ì˜µì €ë²„ íŒ¨í„´ì„ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
function createReactiveObject(target, callback) {
    const proxy = new Proxy(target, {
        set(obj, prop, value) {
            if (value != obj[prop]) {
                const prev = obj[prop]
                obj[prop] = value
                callback(`${prop}ê°€ [${prev}] >> [${value}] ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. `)
            }
            return true
        }
    })
    return proxy
}
const a = {
    "í˜•ê·œ" : "ì†”ë¡œ"
}
const b = createReactiveObject(a, console.log)
b.í˜•ê·œ = "ì†”ë¡œ"
b.í˜•ê·œ = "ì»¤í”Œ"
// í˜•ê·œê°€ [ì†”ë¡œ] >> [ì»¤í”Œ] ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.
```

í”„ë¡ì‹œ ê°ì²´ì˜ `get()` í•¨ìˆ˜ëŠ” ì†ì„±ê³¼ í•¨ìˆ˜ì— ëŒ€í•œ ì ‘ê·¼ì„ ê°€ë¡œì±„ë©°, `has()` í•¨ìˆ˜ëŠ” in ã…‡ë…€ì‚°ìì˜ ì‚¬ìš©ì„ ê°€ë¡œì±•ë‹ˆë‹¤. `set()` í•¨ìˆ˜ëŠ” ì†ì„±ì— ëŒ€í•œ ì ‘ê·¼ì„ ê°€ë¡œì±•ë‹ˆë‹¤. `set()` í•¨ìˆ˜ë¥¼ í†µí•´ ì†ì„±ì— ëŒ€í•œ ì ‘ê·¼ì„ â€œê°€ë¡œì±„â€ì„œ í˜•ê·œë¼ëŠ” ì†ì„±ì´ ì†”ë¡œì—ì„œ ì»¤í”Œë¡œ ë˜ëŠ” ê²ƒì„ ê°ì‹œí•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

![ê·¸ë¦¼1-14](../images/ê·¸ë¦¼1-14.png)  
í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë§ì´ ì“°ëŠ” í”„ë ˆì„ì›Œí¬ Vue.js 3.0ì—ì„œ refë‚˜ reactiveë¡œ ì •ì˜í•˜ë©´ í•´ë‹¹ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ìë™ìœ¼ë¡œ DOMì´ ìˆëŠ” ê°’ì´ ë³€ê²½ë˜ëŠ”ë°, ì´ëŠ” ì•ì„œ ì„¤ëª…í•œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ìš©í•œ ì˜µì €ë²„ íŒ¨í„´ì„ ì´ìš©í•˜ì—¬ êµ¬í˜„í•œ ê²ƒì…ë‹ˆë‹¤.

> ìš©ì–´
> 
- DOM(Document Object Model)
    - ë¬¸ì„œ ê°ì²´ ëª¨ë¸ì„ ë§í•˜ë©°, ì›¹ ë¸Œë¼ìš°ì €ìƒì˜ í™”ë©´ì„ ì´ë£¨ê³  ìˆëŠ” ìš”ì†Œë“¤ì„ ì§€ì¹­í•œë‹¤.

```jsx
function createReactiveObject(
    target: Target,
    isReadonly: boolean,
    baseHAndlers: ProxyHandler<any>,
    collectionHandlers: ProxyHandler<any>,
    proxyMap: WeakMap<Target, any>
) {
        if (!isObject(target)) {
            if (__DEV__) {
                console.warn(`value cannot be made reactive: ${String(target)}`)
            }
            return target
        }
        // target is already a Proxy, return it.
        // exception: calling readonly() on a reactive object
        if (
            target[ReactiveFlasg.RAW] &&
            !(isReadonly && target[ReactiveFlags.IS_REACTIVE])
        ) {
            return target
        }
        // target already has corresponding Proxy
        const existingProxy = proxyMap.get(target)
        if (existingProxy) {
            return existingProxy
        }
        // only a whitelist of value types can be observed.
        const targetType = getTargetType(target)
        if (targetType === TargetType.INVALID) {
            return target
        }
        const proxy = new Proxy(
            target,
            targetType === TargetType.COLLECTION ? collectionHandlers : baseHandlers
        )
        proxyMap.set(target, proxy)
        return proxy
}
```

ì•ì˜ ì½”ë“œëŠ” ì‹¤ì œë¡œ Vue.js 3.0ì˜ ì˜µì €ë²„ íŒ¨í„´ì´ ë‹´ê¸´ ì½”ë“œì…ë‹ˆë‹¤. `proxyMap` ì´ë¼ëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í–ˆê³ , ê°ì²´ ë‚´ë¶€ì˜ `get()`, `set()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

## 1.1.5 í”„ë¡ì‹œ íŒ¨í„´ê³¼ í”„ë¡ì‹œ ì„œë²„

## 1.1.6 ì´í„°ë ˆì´í„° íŒ¨í„´

## 1.1.7 ë…¸ì¶œëª¨ë“ˆ íŒ¨í„´

## 1.1.8 MVC íŒ¨í„´

## 1.1.9 MVP íŒ¨í„´

## 1.1.10 MVVM íŒ¨í„´ 

